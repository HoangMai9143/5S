@using Microsoft.EntityFrameworkCore
@using MudBlazor
@using global::DC.Models
@inject AppDbContext appDbContext
@inject ISnackbar sb

<MudDialog>
  <DialogContent>
    <EditForm Model="@currentUser" OnValidSubmit="@SaveUser">
      <DataAnnotationsValidator />
      <MudText Typo="Typo.h6" Class="pa-4">Editing: @currentUser.Username</MudText>
      <MudTextField @bind-Value="currentUser.Password" Label="New Password" Type="@passwordInput" InputType="@passwordInput" Adornment="Adornment.End" AdornmentIcon="@passwordInputIcon" OnAdornmentClick="TogglePasswordVisibility" AdornmentAriaLabel="Show Password" Class="mb-4" />
      < @bind-Value="currentUser.Role" Label="Role" Class="mb-4">
        <MudSelectItem Value="@("Admin")">Admin</MudSelectItem>
        <MudSelectItem Value="@("Mod")">Mod</MudSelectItem>
      </>
    </EditForm>
  </DialogContent>
  <DialogActions>
    <MudButton OnClick="Cancel">Cancel</MudButton>
    <MudButton Color="Color.Primary" OnClick="SaveUser">Save</MudButton>
  </DialogActions>
</MudDialog>